
const parser = new DOMParser();
const serializer = new XMLSerializer();

template = `
    <section class="Danger_Day">
    <h3 class="section-title">Danger Day</h3>
               <svg xmlns="http://www.w3.org/2000/svg" viewBox="255 205 450 146" style="overflow: visible; width: 100%; position: relative;">
                <path fill="#DDEEFA" d="M705 204.9v50.6H418.8c-15.7 1.2-29.5 12.3-29.5 12.3-2.5 7.6-34.7 1.4-34.7 1.4l2.5 4.7c-8.9-5.8-29.4.4-29.4.5 0 .1-26.8 12.9-40.3.1-10.2-9.7-25.1-6.2-32.3-3.9v-65.8H705z"></path>
                <path fill="#D1D9A3" d="M704.8 255.6v49.3l-283.8-.2-18.6-11.2c-18.8 1.6-29.2 10.1-37.3 16.2-8.1 6-12.4 5.7-20.8 6.3-8.5.6-15.5-2.9-21.5-6.2-6-3.3-8.3-4.7-20.8-9.7-12.5-4.9-22.6-3.2-23-3.2s-11 1.6-12.8-1.7c-1.2-2.2-6.8-1.5-11-.8v-23.8c7.2-2.4 22.1-5.9 32.3 3.7 13.6 12.8 40.3.1 40.3-.1s20.6-6.4 29.5-.6l-2.5-4.7s32.1 6.3 34.7-1.3c0 0 13.9-11.1 29.5-12.3h137.7l148.1.3z">
</path>
<path fill="#AEBFAC" d="M704.8 304.8v49.6H255v-59.9c4.2-.7 9.8-1.4 11 .8 1.8 3.3 12.3 1.7 12.7 1.7s10.6-1.8 23.1 3.2c12.5 5 14.8 6.3 20.8 9.7s13.1 6.8 21.6 6.2c8.5-.6 12.7-.3 20.8-6.3 8.1-6 18.6-14.6 37.4-16.2l18.6 11.2h283.8z">
</path>
<path fill="#88B1C9" d="M388.7 269c-.5.6-1.1 1.1-2 1.4L369 236.1l-17.2 24.4 6.3 9.8c-.7-.1-1.4-.3-1.9-.3l-32.7-45.9-34.1 52.4-1.8-1.5-.3-.3 36.2-54.7 26.6 38.4 19.2-26.9 19.4 37.5z">
</path>
<path fill="#C1D831" d="M399.1 294.6c-16.8 2.2-26.4 10.1-34.1 15.7-8.1 6-12.4 5.7-20.8 6.3-2.1.1-4.1.1-6.1-.3l-6.8-42.4c6.3-1.6 21.8-3.1 28.4 1.3L356 270s-1-.2 0 0l19.4 27.3-2.7-25.4c5.5.3 10.8.1 13.9-1.4l12.5 24.1z">
</path>
<path fill="#88B1C9" d="M375.5 297.3L356.1 270c.5.1 1.1.2 1.9.3l17.5 27z"></path>
<path fill="#6EA469" d="M411.7 318.9l-36.2 3.6-31.8 28.5-5.5-34.6c1.9.3 4 .4 6.1.3 8.5-.6 12.7-.3 20.8-6.3 7.7-5.7 17.3-13.5 34.1-15.7l12.5 24.2z"></path>
<path fill="#829D3B" d="M401.8 294.2l-2.6.3-12.4-24c.8-.4 1.6-.9 2-1.4l13 25.1z"></path>
<path fill="#507F4F" d="M415.2 320.3l-38.1 7.7-32.8 26-46.8-24.6-42.4-5.5 17-25.9c1.1.1 2.4 0 3.4-.1l-15.1 23.2 37.3 4.4 46.1 25.5 31.8-28.5 36.2-3.6-12.5-24.4c.8-.1 1.8-.3 2.6-.3l13.3 26.1z"></path>
<path fill="#789226" d="M289.4 276.5L275.5 298c-1 .1-2.2.1-3.4.1l15.3-23.2.3.3c.5.3 1.1.8 1.7 1.3z"></path>
<linearGradient id="a" x1="143.62" x2="176.32" y1="109.89" y2="109.89">
    <stop offset="0" stop-color="#789226"></stop>
    <stop offset="1" stop-color="#C1D831"></stop>
</linearGradient>
<path fill="url(#a)" d="M338.2 316.3c-5.8-.8-11-3.4-15.5-5.9-6-3.3-8.3-4.7-20.8-9.7-12.5-4.9-22.6-3.1-23-3.1-.2 0-1.6.2-3.4.3l13.9-21.5c14 10.2 38.3-1.3 38.3-1.5 0-.1 1.4-.5 3.7-1.1l6.8 42.5z"></path>
<linearGradient id="b" x1="186.53" x2="197.34" y1="86.37" y2="92.61">
    <stop offset="0" stop-color="#8ECEF3"></stop>
    <stop offset=".05" stop-color="#A4D8F5"></stop>
    <stop offset=".13" stop-color="#C0E4F8"></stop>
    <stop offset=".22" stop-color="#D7EEFB"></stop>
    <stop offset=".33" stop-color="#E9F6FD"></stop>
    <stop offset=".45" stop-color="#F6FBFE"></stop>
    <stop offset=".62" stop-color="#FDFEFF"></stop>
    <stop offset="1" stop-color="#FFF"></stop>
</linearGradient>
<path fill="url(#b)" d="M372.8 271.9c-5.5-.3-11.3-1-14.8-1.6l-6.3-9.8 17.3-24.4 3.8 35.8z">
</path>
<linearGradient id="c" x1="186.66" x2="195.78" y1="104.01" y2="104.01">
<stop offset="0" stop-color="#789226">
</stop>
<stop offset=".14" stop-color="#90A92A">
</stop>
<stop offset=".3" stop-color="#A6BE2D">
</stop>
<stop offset=".49" stop-color="#B5CD2F">
</stop>
<stop offset=".7" stop-color="#BED531">
</stop>
<stop offset="1" stop-color="#C1D831">
</stop>
</linearGradient>
<path fill="url(#c)" d="M375.5 297.3l-17.5-27c3.5.5 9.2 1.3 14.8 1.6l2.7 25.4z">
</path>
<path fill="#FFF" d="M386.7 270.5c-3.1 1.4-8.5 1.6-13.9 1.4l-3.9-35.7 17.8 34.3z">
</path>
<linearGradient id="d" x1="159" x2="174.85" y1="86.16" y2="95.31">
<stop offset="0" stop-color="#8ECEF3">
</stop>
<stop offset=".05" stop-color="#A4D8F5">
</stop>
<stop offset=".13" stop-color="#C0E4F8">
</stop>
<stop offset=".22" stop-color="#D7EEFB">
</stop>
<stop offset=".33" stop-color="#E9F6FD">
</stop>
<stop offset=".45" stop-color="#F6FBFE">
</stop>
<stop offset=".62" stop-color="#FDFEFF">
</stop>
<stop offset="1" stop-color="#FFF">
</stop>
</linearGradient>
<path fill="url(#d)" d="M331.4 273.9c-2.3.5-3.7 1-3.7 1.1 0 .1-24.3 11.8-38.3 1.5l34.1-52.4 7.9 49.8z">
</path>
<path fill="#FFF" d="M359.9 275.1c-6.5-4.3-22.1-2.8-28.4-1.3l-8-49.9 32.7 45.9c-1-.2 0 0 0 0l3.7 5.3z">
</path>
<linearGradient id="e" x1="135.77" x2="179.2" y1="125.04" y2="125.04">
<stop offset="0" stop-color="#507F4F">
</stop>
<stop offset="1" stop-color="#6EA469">
</stop>
</linearGradient>
<path fill="url(#e)" d="M343.7 351l-46.1-25.5-37.3-4.4 15.1-23.2c1.8-.1 3.2-.3 3.4-.3.5 0 10.6-1.8 23 3.1s14.8 6.3 20.8 9.7c4.5 2.5 9.7 5.1 15.5 5.9l5.6 34.7z">
</path>
    <text x="302" y="265" font-size="8" tabindex="0">Alpine</text>
    <g transform="translate(385 211)" id="alpine"></g>

    <text x="291" y="293" font-size="8" tabindex="0">Treeline</text>
    <g transform="translate(405 261)" id="treeline"></g>
    
    <text x="269" y="320" font-size="8" tabindex="0">Below Treeline</text>
    <g transform="translate(425 311)" id="below-treeline"></g>
</svg>
</section>
    `

let red = ''

function injectAlpineRating(htmlSection, rating){
    let blueAlpine = '<rect x="18" width="301" height="37" fill="#0072C6" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#FFFFFF" tabindex="0" font-size="18.5" font-weight="bold"><title>Early Season</title>Early Season</text><g transform="scale(0.45)"><g enable-background="new 0 0 792 792" viewBox="15 15 762 762" xmlns="http://www.w3.org/2000/g" transform="scale(0.15) translate(-120, -120)"><path fill="#FFFFFF" d="m123.8 395.9c2.3 3.3 3.7 6.1 5.8 8.3 29.5 29.7 59.1 59.2 88.7 88.8 56.4 56.5 112.8 113 169.1 169.5 4.8 4.8 6.9 4.9 12.6 1.3 1.5-.9 2.9-2.1 4.1-3.3 7-6.9 14-13.7 21-20.7 78.2-78.3 156.4-156.7 234.7-235 5.8-5.8 6.8-8.8.4-16.7-1-1.2-2.2-2.3-3.3-3.5l-117.4-117.4c-44.4-44.6-88.8-89.2-133.3-133.7-10.5-10.5-12.4-10.3-23 .3-38.6 38.6-77.2 77.1-115.7 115.8-27.7 27.8-55.2 55.8-82.9 83.6-18.1 18.1-36.5 35.8-54.6 53.9-2.3 2.3-3.9 5.4-6.2 8.8z"></path><path d="m123.8 395.9c2.3-3.4 3.9-6.5 6.2-8.9 18.1-18 36.5-35.8 54.6-53.9 27.7-27.8 55.2-55.8 82.9-83.6 38.5-38.6 77.1-77.2 115.7-115.8 10.6-10.6 12.5-10.7 23-.3 44.5 44.5 88.9 89 133.3 133.6 39.1 39.2 78.3 78.3 117.4 117.4 1.1 1.1 2.3 2.2 3.3 3.5 6.4 7.9 5.5 10.9-.4 16.7-78.3 78.2-156.5 156.6-234.7 235-6.9 6.9-13.9 13.8-21 20.7-1.3 1.2-2.6 2.4-4.1 3.3-5.8 3.6-7.9 3.4-12.6-1.3-56.3-56.4-112.7-112.9-169-169.3-29.6-29.6-59.2-59.2-88.7-88.8-2.1-2.2-3.6-5-5.9-8.3zm13.5.3c1.3 1.5 2 2.3 2.8 3.1 44.9 44.9 89.8 89.9 134.6 134.8 38.6 38.7 77.3 77.4 115.8 116.1 3 3 5 3.6 8.3.3 83.5-83.7 167.1-167.4 250.7-251 .8-.8 1.4-1.8 2.5-3.3zm105.5-108.2c.3.3.5.7.8 1 .8-.4 1.6-.8 2.3-1.2 24.4-13.9 48.9-27.7 73.3-41.7 3.5-2 6-2.5 9.8 0 12.8 8.3 26 16 38.9 24.1 2.5 1.5 4.1 1.5 6.4-.1 24.6-15.9 49.3-31.5 73.8-47.5 3.7-2.4 5.7-1.7 8.4 1 18.1 18.3 36.3 36.5 54.5 54.7 18.5 18.6 37.1 37.1 55.6 55.7 2.7 2.7 5.9 5.4 9.7 3.7 2.7-1.2 5.4-3.9 6.7-6.7 1.8-3.8-1-7-3.7-9.7-59.7-59.8-119.3-119.5-179-179.3-5.6-5.6-5.8-5.5-11.5.1-37.5 37.6-75 75.2-112.6 112.7-10.9 11.3-22.2 22.2-33.4 33.2z"></path><path fill="#FFFFFF" d="m242.8 288c11.2-11 22.5-21.9 33.6-33 37.6-37.5 75.1-75.1 112.6-112.7 5.7-5.7 5.9-5.7 11.5-.1 59.7 59.8 119.3 119.5 179 179.3 2.7 2.7 5.5 5.8 3.7 9.7-1.3 2.7-4 5.4-6.7 6.7-3.8 1.7-6.9-1-9.7-3.7-18.5-18.6-37.1-37.1-55.6-55.7-18.2-18.2-36.4-36.4-54.5-54.7-2.8-2.8-4.7-3.5-8.4-1-24.5 16-49.2 31.6-73.8 47.5-2.4 1.5-4 1.6-6.4.1-12.9-8.1-26.1-15.8-38.9-24.1-3.8-2.5-6.4-2-9.8 0-24.4 14-48.9 27.8-73.3 41.7-.8.4-1.6.8-2.3 1.2-.4-.6-.7-.9-1-1.2z"></path><circle cx="394.2" cy="498.4" r="73.1"></circle><g fill="#FFFFFF"><circle cx="395.4" cy="463.1" r="9"></circle><path d="m376.6 477.8v6.5h10.2v46.8h-10.2v7.4h36.3v-6.7h-8.6v-54z"></path></g></g></g>'
    let greenAlpine = '<rect x="18" width="301" height="37" fill="#50B848" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>1 - Low</title>1 - Low</text><g transform="scale(0.45)"><g width="81.62" height="81.62"><path fill="#231F20" d="M81.23 39.9L41.73.37c-.52-.5-1.34-.5-1.85 0L.38 39.87c-.25.26-.38.6-.38.94 0 .4.15.7.4 1l39.5 39.5c.24.25.57.4.92.4.34 0 .67-.15.92-.4l39.5-39.5c.5-.5.5-1.33 0-1.84z"></path><path fill="#FFFFFF" d="M68.9 29.8l-4.84-4.84L48.9 9.76 43.7 4.6l-1.54-1.55-.97-.98c-.1-.1-.3-.16-.4-.16-.18 0-.3.1-.4.2l-.74.76L17.53 25l12.63-7.18 9.24 4.33 10.1-7.83.44.33L67 31.7c.52.53 1.37.53 1.9 0 .53-.52.53-1.37 0-1.9z"></path><path fill="#50B848" d="M2.1 41.1l38.34 38.33c.1.1.22.15.36.15.13 0 .26-.06.35-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .12.05.23.14.32z"></path><path fill="#231F20" d="M64.03 46.17c.47.88-3.7 3.84-9 9.15-6 6-13.36 14.44-14.45 15.14-1.2.75-2.77.2-3.28-.58-.27-.4-5.97-9.66-5.97-10.04 0-.77.45-1.47 1.34-2.1.9-.65 1.8-1.52 2.63-1.12.26.13 3.87 6.3 4.85 6.28 1.96-.04 16.22-17.67 19-17.93.65-.07 4.08-.4 4.88 1.2z"></path></g></g>'
    let yellowAlpine = '<rect x="18" width="301" height="37" fill="#FFF200" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>2 - Moderate</title>2 - Moderate</text><g transform="scale(0.45)"><g width="81.62" height="81.61"><path fill="#231F20" d="M81.23 39.9L41.73.37c-.5-.5-1.34-.5-1.84 0L.3 39.87c-.24.26-.37.6-.37.94 0 .4.14.7.4 1l39.5 39.5c.24.3.57.4.9.4s.7-.1.93-.3l39.5-39.5c.5-.5.5-1.3 0-1.8z"></path><path fill="#FFF200" d="M2.1 41.1l38.34 38.33c.1.1.23.15.36.15.13 0 .26-.05.36-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .12.06.23.14.32z"></path><path fill="#231F20" d="M37.08 46.26l.74 15.1c0 2.17 5.9 2.17 5.9 0l.73-15.1c0-2.4-7.37-2.4-7.37 0zm6.9 21.47c0 1.76-1.43 3.18-3.18 3.18-1.76 0-3.18-1.4-3.18-3.1s1.42-3.2 3.18-3.2c1.75 0 3.18 1.5 3.18 3.2zm16-49.43c-.85.85-1.27 1.96-1.27 3.06s.5 2.2 1.3 3.06c.7.63 1.5 1.03 2.4 1.18.1 1.03.5 2 1.2 2.74.3.27.6.5 1 .68.2.3.4.6.7.86.6.52 1.2.9 1.9 1.12.1 1.4.7 2.7 1.7 3.7 2.3 2.3 6 2.3 8.3 0 1.1-1.1 1.7-2.57 1.7-4.14 0-1.57-.6-3.05-1.7-4.15-.8-.8-1.9-1.3-3-1.5.35-.7.57-1.4.57-2.1 0-1.2-.46-2.4-1.4-3.3-1.75-1.7-4.56-1.8-6.43-.2-.17-.23-.36-.5-.6-.72-1.7-1.66-4.4-1.66-6.1 0z"></path><path fill="#FFFFFF" d="M69.33 34.05c-.9-.9-1.4-2.1-1.44-3.4l-.1-.34h-.4c-.7-.1-1.3-.5-1.8-1-.3-.2-.4-.5-.6-.7l-.1-.1h-.2c-.3-.1-.6-.3-.84-.6-.6-.6-.95-1.5-.9-2.4l.06-.43-.5-.04c-.8-.07-1.6-.4-2.2-1-1.32-1.3-1.32-3.46 0-4.8 1.3-1.3 3.46-1.3 4.8 0 .28.3.5.65.68 1.03l.3.6.57-.6.1-.07c1.5-1.5 3.96-1.5 5.46 0 1.35 1.3 1.5 3.4.45 4.9l-.45.7.8.05c1.15.1 2.26.6 3.1 1.45 1.9 1.92 1.9 5.05 0 7-1.94 1.9-5.07 1.9-7 0z"></path><path fill="#FFFFFF" d="M71.27 32.16l-7.2-7.2-15.2-15.2L43.7 4.6l-1.55-1.54-.98-1c-.1-.08-.24-.14-.37-.14-.14 0-.27.06-.37.15l-.73.74L17.52 25l12.64-7.17 9.23 4.36 10-7.9.4.3L69.3 34c.5.52 1.34.52 1.9 0 .5-.54.5-1.4 0-1.93z"></path><path fill="#231F20" d="M70.9 26.55c-.35-.44-1.06-.74-1.6-.8-.03 0-.06.02-.07.06 0 .1 0 .1.04.1 1.17.5 1.76 1.5 1.66 2.7-.12 1.3-.77 2-2.1 2.4-.04 0-.06.1-.06.1s.03.1.06.1c.53.1 1.3-.1 1.73-.4.54-.42.96-1.1 1.03-1.9v-.23c0-.64-.3-1.3-.7-1.8z"></path></g></g>'
    let orangeAlpine = '<rect x="18" width="301" height="37" fill="#F7941E" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>3 - Considerable</title>3 - Considerable</text><g transform="scale(0.45)"><g width="98.38" height="81.61"><path fill="#231F20" d="M91.37 26.73c-.45 0-.92.1-1.38.2-1-3.2-3.9-5.42-7.3-5.42-3.2 0-6 2-7.1 4.9-.9-.4-1.8-.6-2.7-.6-1.7 0-3.2.7-4.3 1.7L41.7.4c-.5-.5-1.33-.5-1.84 0L.36 39.88c-.26.25-.4.6-.4.93 0 .4.15.7.4 1l39.5 39.5c.24.3.57.4.9.4.36 0 .7-.1.94-.3l39.5-39.5c.3-.2.4-.6.4-.9h9.8c3.9 0 7-3.1 7-7 0-3.86-3.1-7-7-7z"></path><path fill="#FFFFFF" d="M91.37 27.66c-.52 0-1.05.08-1.58.22l-.5.12-.1-.46c-.8-3-3.4-5.1-6.5-5.1-3 0-5.5 1.9-6.4 4.7l-.2.55-.5-.3c-.9-.5-1.8-.8-2.7-.8-2 0-3.7 1-4.6 2.6L64 24.9 48.8 9.7l-5.4-5.4L42.1 3l-.96-.96c-.1-.1-.24-.15-.37-.15-.14 0-.27 0-.37.1l-.72.7L17.5 24.9l12.63-7.17 9.24 4.34 6.92-5.23 17.3 17.3c.6.68 1.1 1.3 1.5 1.63l.4.4c1.3 1.3 3.7 3.72 6.4 3.72h19.4c3.3 0 6-2.8 6-6.2 0-3.4-2.7-6.1-6.1-6.1z"></path><path fill="#231F20" d="M48.5 15.23L69.27 36c.28.28.73.28 1 0 .3-.28.3-.73 0-1L49.63 14.32l-1.13.9zM82.64 33.4c-.18-1.13-.8-2.16-2.1-2.8-1.16-.54-2.72-.6-3.83-.22-.9.3-1.8 1-2.2 1.8 0 .05 0 .13.1.16.1.04.1.03.2 0 1.5-1.5 3.6-1.62 5.1-.9 1.8.88 2.6 2.38 2.3 4.63 0 .06.1.12.1.14.1.1.1 0 .2 0 .4-.8.5-1.8.4-2.7z"></path><path fill="#F7941E" d="M2.1 41.1l38.34 38.33c.1.1.22.15.36.15.13 0 .26-.05.36-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .1.05.23.14.32z"></path><g fill="#231F20"><path d="M31.88 45.2l.73 15.1c0 2.17 5.9 2.17 5.9 0l.8-15.1c0-2.4-7.3-2.4-7.3 0z"></path><circle cx="35.59" cy="66.67" r="3.18"></circle></g><g fill="#231F20"><path d="M42.27 45.2L43 60.3c0 2.17 5.9 2.17 5.9 0l.73-15.1c0-2.4-7.36-2.4-7.36 0z"></path><circle cx="45.99" cy="66.67" r="3.18"></circle></g></g></g>'
    switch(rating){
        case 0:
            htmlSection.innerHTML = blueAlpine
            break
        case 1:
            htmlSection.innerHTML = greenAlpine
            break
        case 2:
            htmlSection.innerHTML = yellowAlpine
            break
        case 3:
            htmlSection.innerHTML = orangeAlpine
            break
        case 4:
            htmlSection.innerHTML = red
            break
    }
    return htmlSection
}

function injectTreelineRating(htmlSection, rating){
    let blueTreeline = '<rect x="18" width="281" height="37" fill="#0072C6" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#FFFFFF" tabindex="0" font-size="18.5" font-weight="bold"><title>Early Season</title>Early Season</text><g transform="scale(0.45)"><g enable-background="new 0 0 792 792" viewBox="15 15 762 762" xmlns="http://www.w3.org/2000/g" transform="scale(0.15) translate(-120, -120)"><path fill="#FFFFFF" d="m123.8 395.9c2.3 3.3 3.7 6.1 5.8 8.3 29.5 29.7 59.1 59.2 88.7 88.8 56.4 56.5 112.8 113 169.1 169.5 4.8 4.8 6.9 4.9 12.6 1.3 1.5-.9 2.9-2.1 4.1-3.3 7-6.9 14-13.7 21-20.7 78.2-78.3 156.4-156.7 234.7-235 5.8-5.8 6.8-8.8.4-16.7-1-1.2-2.2-2.3-3.3-3.5l-117.4-117.4c-44.4-44.6-88.8-89.2-133.3-133.7-10.5-10.5-12.4-10.3-23 .3-38.6 38.6-77.2 77.1-115.7 115.8-27.7 27.8-55.2 55.8-82.9 83.6-18.1 18.1-36.5 35.8-54.6 53.9-2.3 2.3-3.9 5.4-6.2 8.8z"></path><path d="m123.8 395.9c2.3-3.4 3.9-6.5 6.2-8.9 18.1-18 36.5-35.8 54.6-53.9 27.7-27.8 55.2-55.8 82.9-83.6 38.5-38.6 77.1-77.2 115.7-115.8 10.6-10.6 12.5-10.7 23-.3 44.5 44.5 88.9 89 133.3 133.6 39.1 39.2 78.3 78.3 117.4 117.4 1.1 1.1 2.3 2.2 3.3 3.5 6.4 7.9 5.5 10.9-.4 16.7-78.3 78.2-156.5 156.6-234.7 235-6.9 6.9-13.9 13.8-21 20.7-1.3 1.2-2.6 2.4-4.1 3.3-5.8 3.6-7.9 3.4-12.6-1.3-56.3-56.4-112.7-112.9-169-169.3-29.6-29.6-59.2-59.2-88.7-88.8-2.1-2.2-3.6-5-5.9-8.3zm13.5.3c1.3 1.5 2 2.3 2.8 3.1 44.9 44.9 89.8 89.9 134.6 134.8 38.6 38.7 77.3 77.4 115.8 116.1 3 3 5 3.6 8.3.3 83.5-83.7 167.1-167.4 250.7-251 .8-.8 1.4-1.8 2.5-3.3zm105.5-108.2c.3.3.5.7.8 1 .8-.4 1.6-.8 2.3-1.2 24.4-13.9 48.9-27.7 73.3-41.7 3.5-2 6-2.5 9.8 0 12.8 8.3 26 16 38.9 24.1 2.5 1.5 4.1 1.5 6.4-.1 24.6-15.9 49.3-31.5 73.8-47.5 3.7-2.4 5.7-1.7 8.4 1 18.1 18.3 36.3 36.5 54.5 54.7 18.5 18.6 37.1 37.1 55.6 55.7 2.7 2.7 5.9 5.4 9.7 3.7 2.7-1.2 5.4-3.9 6.7-6.7 1.8-3.8-1-7-3.7-9.7-59.7-59.8-119.3-119.5-179-179.3-5.6-5.6-5.8-5.5-11.5.1-37.5 37.6-75 75.2-112.6 112.7-10.9 11.3-22.2 22.2-33.4 33.2z"></path><path fill="#FFFFFF" d="m242.8 288c11.2-11 22.5-21.9 33.6-33 37.6-37.5 75.1-75.1 112.6-112.7 5.7-5.7 5.9-5.7 11.5-.1 59.7 59.8 119.3 119.5 179 179.3 2.7 2.7 5.5 5.8 3.7 9.7-1.3 2.7-4 5.4-6.7 6.7-3.8 1.7-6.9-1-9.7-3.7-18.5-18.6-37.1-37.1-55.6-55.7-18.2-18.2-36.4-36.4-54.5-54.7-2.8-2.8-4.7-3.5-8.4-1-24.5 16-49.2 31.6-73.8 47.5-2.4 1.5-4 1.6-6.4.1-12.9-8.1-26.1-15.8-38.9-24.1-3.8-2.5-6.4-2-9.8 0-24.4 14-48.9 27.8-73.3 41.7-.8.4-1.6.8-2.3 1.2-.4-.6-.7-.9-1-1.2z"></path><circle cx="394.2" cy="498.4" r="73.1"></circle><g fill="#FFFFFF"><circle cx="395.4" cy="463.1" r="9"></circle><path d="m376.6 477.8v6.5h10.2v46.8h-10.2v7.4h36.3v-6.7h-8.6v-54z"></path></g></g></g>'
    let greenTreeline = '<rect x="18" width="281" height="37" fill="#50B848" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>1 - Low</title>1 - Low</text><g transform="scale(0.45)"><g width="81.62" height="81.62"><path fill="#231F20" d="M81.23 39.9L41.73.37c-.52-.5-1.34-.5-1.85 0L.38 39.87c-.25.26-.38.6-.38.94 0 .4.15.7.4 1l39.5 39.5c.24.25.57.4.92.4.34 0 .67-.15.92-.4l39.5-39.5c.5-.5.5-1.33 0-1.84z"></path><path fill="#FFFFFF" d="M68.9 29.8l-4.84-4.84L48.9 9.76 43.7 4.6l-1.54-1.55-.97-.98c-.1-.1-.3-.16-.4-.16-.18 0-.3.1-.4.2l-.74.76L17.53 25l12.63-7.18 9.24 4.33 10.1-7.83.44.33L67 31.7c.52.53 1.37.53 1.9 0 .53-.52.53-1.37 0-1.9z"></path><path fill="#50B848" d="M2.1 41.1l38.34 38.33c.1.1.22.15.36.15.13 0 .26-.06.35-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .12.05.23.14.32z"></path><path fill="#231F20" d="M64.03 46.17c.47.88-3.7 3.84-9 9.15-6 6-13.36 14.44-14.45 15.14-1.2.75-2.77.2-3.28-.58-.27-.4-5.97-9.66-5.97-10.04 0-.77.45-1.47 1.34-2.1.9-.65 1.8-1.52 2.63-1.12.26.13 3.87 6.3 4.85 6.28 1.96-.04 16.22-17.67 19-17.93.65-.07 4.08-.4 4.88 1.2z"></path></g></g>'
    let yellowTreeline = '<rect x="18" width="281" height="37" fill="#FFF200" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>2 - Moderate</title>2 - Moderate</text><g transform="scale(0.45)"><g width="81.62" height="81.61"><path fill="#231F20" d="M81.23 39.9L41.73.37c-.5-.5-1.34-.5-1.84 0L.3 39.87c-.24.26-.37.6-.37.94 0 .4.14.7.4 1l39.5 39.5c.24.3.57.4.9.4s.7-.1.93-.3l39.5-39.5c.5-.5.5-1.3 0-1.8z"></path><path fill="#FFF200" d="M2.1 41.1l38.34 38.33c.1.1.23.15.36.15.13 0 .26-.05.36-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .12.06.23.14.32z"></path><path fill="#231F20" d="M37.08 46.26l.74 15.1c0 2.17 5.9 2.17 5.9 0l.73-15.1c0-2.4-7.37-2.4-7.37 0zm6.9 21.47c0 1.76-1.43 3.18-3.18 3.18-1.76 0-3.18-1.4-3.18-3.1s1.42-3.2 3.18-3.2c1.75 0 3.18 1.5 3.18 3.2zm16-49.43c-.85.85-1.27 1.96-1.27 3.06s.5 2.2 1.3 3.06c.7.63 1.5 1.03 2.4 1.18.1 1.03.5 2 1.2 2.74.3.27.6.5 1 .68.2.3.4.6.7.86.6.52 1.2.9 1.9 1.12.1 1.4.7 2.7 1.7 3.7 2.3 2.3 6 2.3 8.3 0 1.1-1.1 1.7-2.57 1.7-4.14 0-1.57-.6-3.05-1.7-4.15-.8-.8-1.9-1.3-3-1.5.35-.7.57-1.4.57-2.1 0-1.2-.46-2.4-1.4-3.3-1.75-1.7-4.56-1.8-6.43-.2-.17-.23-.36-.5-.6-.72-1.7-1.66-4.4-1.66-6.1 0z"></path><path fill="#FFFFFF" d="M69.33 34.05c-.9-.9-1.4-2.1-1.44-3.4l-.1-.34h-.4c-.7-.1-1.3-.5-1.8-1-.3-.2-.4-.5-.6-.7l-.1-.1h-.2c-.3-.1-.6-.3-.84-.6-.6-.6-.95-1.5-.9-2.4l.06-.43-.5-.04c-.8-.07-1.6-.4-2.2-1-1.32-1.3-1.32-3.46 0-4.8 1.3-1.3 3.46-1.3 4.8 0 .28.3.5.65.68 1.03l.3.6.57-.6.1-.07c1.5-1.5 3.96-1.5 5.46 0 1.35 1.3 1.5 3.4.45 4.9l-.45.7.8.05c1.15.1 2.26.6 3.1 1.45 1.9 1.92 1.9 5.05 0 7-1.94 1.9-5.07 1.9-7 0z"></path><path fill="#FFFFFF" d="M71.27 32.16l-7.2-7.2-15.2-15.2L43.7 4.6l-1.55-1.54-.98-1c-.1-.08-.24-.14-.37-.14-.14 0-.27.06-.37.15l-.73.74L17.52 25l12.64-7.17 9.23 4.36 10-7.9.4.3L69.3 34c.5.52 1.34.52 1.9 0 .5-.54.5-1.4 0-1.93z"></path><path fill="#231F20" d="M70.9 26.55c-.35-.44-1.06-.74-1.6-.8-.03 0-.06.02-.07.06 0 .1 0 .1.04.1 1.17.5 1.76 1.5 1.66 2.7-.12 1.3-.77 2-2.1 2.4-.04 0-.06.1-.06.1s.03.1.06.1c.53.1 1.3-.1 1.73-.4.54-.42.96-1.1 1.03-1.9v-.23c0-.64-.3-1.3-.7-1.8z"></path></g></g>'
    let orangeTreeline = '<rect x="18" width="281" height="37" fill="#F7941E" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>3 - Considerable</title>3 - Considerable</text><g transform="scale(0.45)"><g width="98.38" height="81.61"><path fill="#231F20" d="M91.37 26.73c-.45 0-.92.1-1.38.2-1-3.2-3.9-5.42-7.3-5.42-3.2 0-6 2-7.1 4.9-.9-.4-1.8-.6-2.7-.6-1.7 0-3.2.7-4.3 1.7L41.7.4c-.5-.5-1.33-.5-1.84 0L.36 39.88c-.26.25-.4.6-.4.93 0 .4.15.7.4 1l39.5 39.5c.24.3.57.4.9.4.36 0 .7-.1.94-.3l39.5-39.5c.3-.2.4-.6.4-.9h9.8c3.9 0 7-3.1 7-7 0-3.86-3.1-7-7-7z"></path><path fill="#FFFFFF" d="M91.37 27.66c-.52 0-1.05.08-1.58.22l-.5.12-.1-.46c-.8-3-3.4-5.1-6.5-5.1-3 0-5.5 1.9-6.4 4.7l-.2.55-.5-.3c-.9-.5-1.8-.8-2.7-.8-2 0-3.7 1-4.6 2.6L64 24.9 48.8 9.7l-5.4-5.4L42.1 3l-.96-.96c-.1-.1-.24-.15-.37-.15-.14 0-.27 0-.37.1l-.72.7L17.5 24.9l12.63-7.17 9.24 4.34 6.92-5.23 17.3 17.3c.6.68 1.1 1.3 1.5 1.63l.4.4c1.3 1.3 3.7 3.72 6.4 3.72h19.4c3.3 0 6-2.8 6-6.2 0-3.4-2.7-6.1-6.1-6.1z"></path><path fill="#231F20" d="M48.5 15.23L69.27 36c.28.28.73.28 1 0 .3-.28.3-.73 0-1L49.63 14.32l-1.13.9zM82.64 33.4c-.18-1.13-.8-2.16-2.1-2.8-1.16-.54-2.72-.6-3.83-.22-.9.3-1.8 1-2.2 1.8 0 .05 0 .13.1.16.1.04.1.03.2 0 1.5-1.5 3.6-1.62 5.1-.9 1.8.88 2.6 2.38 2.3 4.63 0 .06.1.12.1.14.1.1.1 0 .2 0 .4-.8.5-1.8.4-2.7z"></path><path fill="#F7941E" d="M2.1 41.1l38.34 38.33c.1.1.22.15.36.15.13 0 .26-.05.36-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .1.05.23.14.32z"></path><g fill="#231F20"><path d="M31.88 45.2l.73 15.1c0 2.17 5.9 2.17 5.9 0l.8-15.1c0-2.4-7.3-2.4-7.3 0z"></path><circle cx="35.59" cy="66.67" r="3.18"></circle></g><g fill="#231F20"><path d="M42.27 45.2L43 60.3c0 2.17 5.9 2.17 5.9 0l.73-15.1c0-2.4-7.36-2.4-7.36 0z"></path><circle cx="45.99" cy="66.67" r="3.18"></circle></g></g></g>'
    switch(rating){
        case 0:
            htmlSection.innerHTML = blueTreeline
            break
        case 1:
            htmlSection.innerHTML = greenTreeline
            break
        case 2:
            htmlSection.innerHTML = yellowTreeline
            break
        case 3:
            htmlSection.innerHTML = orangeTreeline
            break
        case 4:
            htmlSection.innerHTML = red
            break
    }
    return htmlSection
}

function injectBelowTreelineRating(htmlSection, rating){
    let blueBelowTreeline = '<rect x="18" width="261" height="37" fill="#0072C6" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#FFFFFF" tabindex="0" font-size="18.5" font-weight="bold"><title>Early Season</title>Early Season</text><g transform="scale(0.45)"><g enable-background="new 0 0 792 792" viewBox="15 15 762 762" xmlns="http://www.w3.org/2000/g" transform="scale(0.15) translate(-120, -120)"><path fill="#FFFFFF" d="m123.8 395.9c2.3 3.3 3.7 6.1 5.8 8.3 29.5 29.7 59.1 59.2 88.7 88.8 56.4 56.5 112.8 113 169.1 169.5 4.8 4.8 6.9 4.9 12.6 1.3 1.5-.9 2.9-2.1 4.1-3.3 7-6.9 14-13.7 21-20.7 78.2-78.3 156.4-156.7 234.7-235 5.8-5.8 6.8-8.8.4-16.7-1-1.2-2.2-2.3-3.3-3.5l-117.4-117.4c-44.4-44.6-88.8-89.2-133.3-133.7-10.5-10.5-12.4-10.3-23 .3-38.6 38.6-77.2 77.1-115.7 115.8-27.7 27.8-55.2 55.8-82.9 83.6-18.1 18.1-36.5 35.8-54.6 53.9-2.3 2.3-3.9 5.4-6.2 8.8z"></path><path d="m123.8 395.9c2.3-3.4 3.9-6.5 6.2-8.9 18.1-18 36.5-35.8 54.6-53.9 27.7-27.8 55.2-55.8 82.9-83.6 38.5-38.6 77.1-77.2 115.7-115.8 10.6-10.6 12.5-10.7 23-.3 44.5 44.5 88.9 89 133.3 133.6 39.1 39.2 78.3 78.3 117.4 117.4 1.1 1.1 2.3 2.2 3.3 3.5 6.4 7.9 5.5 10.9-.4 16.7-78.3 78.2-156.5 156.6-234.7 235-6.9 6.9-13.9 13.8-21 20.7-1.3 1.2-2.6 2.4-4.1 3.3-5.8 3.6-7.9 3.4-12.6-1.3-56.3-56.4-112.7-112.9-169-169.3-29.6-29.6-59.2-59.2-88.7-88.8-2.1-2.2-3.6-5-5.9-8.3zm13.5.3c1.3 1.5 2 2.3 2.8 3.1 44.9 44.9 89.8 89.9 134.6 134.8 38.6 38.7 77.3 77.4 115.8 116.1 3 3 5 3.6 8.3.3 83.5-83.7 167.1-167.4 250.7-251 .8-.8 1.4-1.8 2.5-3.3zm105.5-108.2c.3.3.5.7.8 1 .8-.4 1.6-.8 2.3-1.2 24.4-13.9 48.9-27.7 73.3-41.7 3.5-2 6-2.5 9.8 0 12.8 8.3 26 16 38.9 24.1 2.5 1.5 4.1 1.5 6.4-.1 24.6-15.9 49.3-31.5 73.8-47.5 3.7-2.4 5.7-1.7 8.4 1 18.1 18.3 36.3 36.5 54.5 54.7 18.5 18.6 37.1 37.1 55.6 55.7 2.7 2.7 5.9 5.4 9.7 3.7 2.7-1.2 5.4-3.9 6.7-6.7 1.8-3.8-1-7-3.7-9.7-59.7-59.8-119.3-119.5-179-179.3-5.6-5.6-5.8-5.5-11.5.1-37.5 37.6-75 75.2-112.6 112.7-10.9 11.3-22.2 22.2-33.4 33.2z"></path><path fill="#FFFFFF" d="m242.8 288c11.2-11 22.5-21.9 33.6-33 37.6-37.5 75.1-75.1 112.6-112.7 5.7-5.7 5.9-5.7 11.5-.1 59.7 59.8 119.3 119.5 179 179.3 2.7 2.7 5.5 5.8 3.7 9.7-1.3 2.7-4 5.4-6.7 6.7-3.8 1.7-6.9-1-9.7-3.7-18.5-18.6-37.1-37.1-55.6-55.7-18.2-18.2-36.4-36.4-54.5-54.7-2.8-2.8-4.7-3.5-8.4-1-24.5 16-49.2 31.6-73.8 47.5-2.4 1.5-4 1.6-6.4.1-12.9-8.1-26.1-15.8-38.9-24.1-3.8-2.5-6.4-2-9.8 0-24.4 14-48.9 27.8-73.3 41.7-.8.4-1.6.8-2.3 1.2-.4-.6-.7-.9-1-1.2z"></path><circle cx="394.2" cy="498.4" r="73.1"></circle><g fill="#FFFFFF"><circle cx="395.4" cy="463.1" r="9"></circle><path d="m376.6 477.8v6.5h10.2v46.8h-10.2v7.4h36.3v-6.7h-8.6v-54z"></path></g></g></g>'
    let greenBelowTreeline = '<rect x="18" width="261" height="37" fill="#50B848" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>1 - Low</title>1 - Low</text><g transform="scale(0.45)"><g width="81.62" height="81.62"><path fill="#231F20" d="M81.23 39.9L41.73.37c-.52-.5-1.34-.5-1.85 0L.38 39.87c-.25.26-.38.6-.38.94 0 .4.15.7.4 1l39.5 39.5c.24.25.57.4.92.4.34 0 .67-.15.92-.4l39.5-39.5c.5-.5.5-1.33 0-1.84z"></path><path fill="#FFFFFF" d="M68.9 29.8l-4.84-4.84L48.9 9.76 43.7 4.6l-1.54-1.55-.97-.98c-.1-.1-.3-.16-.4-.16-.18 0-.3.1-.4.2l-.74.76L17.53 25l12.63-7.18 9.24 4.33 10.1-7.83.44.33L67 31.7c.52.53 1.37.53 1.9 0 .53-.52.53-1.37 0-1.9z"></path><path fill="#50B848" d="M2.1 41.1l38.34 38.33c.1.1.22.15.36.15.13 0 .26-.06.35-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .12.05.23.14.32z"></path><path fill="#231F20" d="M64.03 46.17c.47.88-3.7 3.84-9 9.15-6 6-13.36 14.44-14.45 15.14-1.2.75-2.77.2-3.28-.58-.27-.4-5.97-9.66-5.97-10.04 0-.77.45-1.47 1.34-2.1.9-.65 1.8-1.52 2.63-1.12.26.13 3.87 6.3 4.85 6.28 1.96-.04 16.22-17.67 19-17.93.65-.07 4.08-.4 4.88 1.2z"></path></g></g>'
    let yellowBelowTreeline = '<rect x="18" width="261" height="37" fill="#FFF200" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>2 - Moderate</title>2 - Moderate</text><g transform="scale(0.45)"><g width="81.62" height="81.61"><path fill="#231F20" d="M81.23 39.9L41.73.37c-.5-.5-1.34-.5-1.84 0L.3 39.87c-.24.26-.37.6-.37.94 0 .4.14.7.4 1l39.5 39.5c.24.3.57.4.9.4s.7-.1.93-.3l39.5-39.5c.5-.5.5-1.3 0-1.8z"></path><path fill="#FFF200" d="M2.1 41.1l38.34 38.33c.1.1.23.15.36.15.13 0 .26-.05.36-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .12.06.23.14.32z"></path><path fill="#231F20" d="M37.08 46.26l.74 15.1c0 2.17 5.9 2.17 5.9 0l.73-15.1c0-2.4-7.37-2.4-7.37 0zm6.9 21.47c0 1.76-1.43 3.18-3.18 3.18-1.76 0-3.18-1.4-3.18-3.1s1.42-3.2 3.18-3.2c1.75 0 3.18 1.5 3.18 3.2zm16-49.43c-.85.85-1.27 1.96-1.27 3.06s.5 2.2 1.3 3.06c.7.63 1.5 1.03 2.4 1.18.1 1.03.5 2 1.2 2.74.3.27.6.5 1 .68.2.3.4.6.7.86.6.52 1.2.9 1.9 1.12.1 1.4.7 2.7 1.7 3.7 2.3 2.3 6 2.3 8.3 0 1.1-1.1 1.7-2.57 1.7-4.14 0-1.57-.6-3.05-1.7-4.15-.8-.8-1.9-1.3-3-1.5.35-.7.57-1.4.57-2.1 0-1.2-.46-2.4-1.4-3.3-1.75-1.7-4.56-1.8-6.43-.2-.17-.23-.36-.5-.6-.72-1.7-1.66-4.4-1.66-6.1 0z"></path><path fill="#FFFFFF" d="M69.33 34.05c-.9-.9-1.4-2.1-1.44-3.4l-.1-.34h-.4c-.7-.1-1.3-.5-1.8-1-.3-.2-.4-.5-.6-.7l-.1-.1h-.2c-.3-.1-.6-.3-.84-.6-.6-.6-.95-1.5-.9-2.4l.06-.43-.5-.04c-.8-.07-1.6-.4-2.2-1-1.32-1.3-1.32-3.46 0-4.8 1.3-1.3 3.46-1.3 4.8 0 .28.3.5.65.68 1.03l.3.6.57-.6.1-.07c1.5-1.5 3.96-1.5 5.46 0 1.35 1.3 1.5 3.4.45 4.9l-.45.7.8.05c1.15.1 2.26.6 3.1 1.45 1.9 1.92 1.9 5.05 0 7-1.94 1.9-5.07 1.9-7 0z"></path><path fill="#FFFFFF" d="M71.27 32.16l-7.2-7.2-15.2-15.2L43.7 4.6l-1.55-1.54-.98-1c-.1-.08-.24-.14-.37-.14-.14 0-.27.06-.37.15l-.73.74L17.52 25l12.64-7.17 9.23 4.36 10-7.9.4.3L69.3 34c.5.52 1.34.52 1.9 0 .5-.54.5-1.4 0-1.93z"></path><path fill="#231F20" d="M70.9 26.55c-.35-.44-1.06-.74-1.6-.8-.03 0-.06.02-.07.06 0 .1 0 .1.04.1 1.17.5 1.76 1.5 1.66 2.7-.12 1.3-.77 2-2.1 2.4-.04 0-.06.1-.06.1s.03.1.06.1c.53.1 1.3-.1 1.73-.4.54-.42.96-1.1 1.03-1.9v-.23c0-.64-.3-1.3-.7-1.8z"></path></g></g>'
    let orangeBelowTreeline = '<rect x="18" width="261" height="37" fill="#F7941E" stroke="#231F20" stroke-width="0.5" stroke-miterlimit="10"></rect><text x="70" y="23" fill="#231F20" tabindex="0" font-size="18.5" font-weight="bold"><title>3 - Considerable</title>3 - Considerable</text><g transform="scale(0.45)"><g width="98.38" height="81.61"><path fill="#231F20" d="M91.37 26.73c-.45 0-.92.1-1.38.2-1-3.2-3.9-5.42-7.3-5.42-3.2 0-6 2-7.1 4.9-.9-.4-1.8-.6-2.7-.6-1.7 0-3.2.7-4.3 1.7L41.7.4c-.5-.5-1.33-.5-1.84 0L.36 39.88c-.26.25-.4.6-.4.93 0 .4.15.7.4 1l39.5 39.5c.24.3.57.4.9.4.36 0 .7-.1.94-.3l39.5-39.5c.3-.2.4-.6.4-.9h9.8c3.9 0 7-3.1 7-7 0-3.86-3.1-7-7-7z"></path><path fill="#FFFFFF" d="M91.37 27.66c-.52 0-1.05.08-1.58.22l-.5.12-.1-.46c-.8-3-3.4-5.1-6.5-5.1-3 0-5.5 1.9-6.4 4.7l-.2.55-.5-.3c-.9-.5-1.8-.8-2.7-.8-2 0-3.7 1-4.6 2.6L64 24.9 48.8 9.7l-5.4-5.4L42.1 3l-.96-.96c-.1-.1-.24-.15-.37-.15-.14 0-.27 0-.37.1l-.72.7L17.5 24.9l12.63-7.17 9.24 4.34 6.92-5.23 17.3 17.3c.6.68 1.1 1.3 1.5 1.63l.4.4c1.3 1.3 3.7 3.72 6.4 3.72h19.4c3.3 0 6-2.8 6-6.2 0-3.4-2.7-6.1-6.1-6.1z"></path><path fill="#231F20" d="M48.5 15.23L69.27 36c.28.28.73.28 1 0 .3-.28.3-.73 0-1L49.63 14.32l-1.13.9zM82.64 33.4c-.18-1.13-.8-2.16-2.1-2.8-1.16-.54-2.72-.6-3.83-.22-.9.3-1.8 1-2.2 1.8 0 .05 0 .13.1.16.1.04.1.03.2 0 1.5-1.5 3.6-1.62 5.1-.9 1.8.88 2.6 2.38 2.3 4.63 0 .06.1.12.1.14.1.1.1 0 .2 0 .4-.8.5-1.8.4-2.7z"></path><path fill="#F7941E" d="M2.1 41.1l38.34 38.33c.1.1.22.15.36.15.13 0 .26-.05.36-.15L79.5 41.1c.08-.1.12-.2.13-.32H1.97c0 .1.05.23.14.32z"></path><g fill="#231F20"><path d="M31.88 45.2l.73 15.1c0 2.17 5.9 2.17 5.9 0l.8-15.1c0-2.4-7.3-2.4-7.3 0z"></path><circle cx="35.59" cy="66.67" r="3.18"></circle></g><g fill="#231F20"><path d="M42.27 45.2L43 60.3c0 2.17 5.9 2.17 5.9 0l.73-15.1c0-2.4-7.36-2.4-7.36 0z"></path><circle cx="45.99" cy="66.67" r="3.18"></circle></g></g></g>'
    switch(rating){
        case 0:
            htmlSection.innerHTML = blueBelowTreeline
            break
        case 1:
            htmlSection.innerHTML = greenBelowTreeline
            break
        case 2:
            htmlSection.innerHTML = yellowBelowTreeline
            break
        case 3:
            htmlSection.innerHTML = orangeBelowTreeline
            break
        case 4:
            htmlSection.innerHTML = red
            break
    }
    return htmlSection
}

function renderDangerRatingDay(dateStr, alpine, treeline, belowTreeline){
    let htmlSection = parser.parseFromString(template, "application/xml");
    htmlSection.querySelector('.section-title').textContent = dateStr
    let alpineSection = htmlSection.querySelector('#alpine')
    let treelineSection = htmlSection.querySelector('#treeline')
    let belowTreelineSection = htmlSection.querySelector('#below-treeline')
    alpineSection = injectAlpineRating(alpineSection, alpine)
    treelineSection = injectTreelineRating(treelineSection, treeline)
    belowTreelineSection = injectBelowTreelineRating(belowTreelineSection, belowTreeline)

    return serializer.serializeToString(htmlSection)
}

function renderDangerRatings(data){
    // fetch /avi_report
    function strToRating(str){
        switch(str){
            case 'low':
                return 1
            case 'moderate':
                return 2
            case 'considerable':
                return 3
            case 'high':
                return 4
            default:
                return 0
        }

    }


    const dangerRatings = data.report.dangerRatings
    const dangerRatingContent = document.querySelector('#danger-rating-content')
    dangerRatingContent.innerHTML = ''
    dangerRatings.forEach(r => {
        console.log(r)
        const day = renderDangerRatingDay(
            r.date.display,
            strToRating(r.ratings.alp.rating.value),
            strToRating(r.ratings.tln.rating.value),
            strToRating(r.ratings.btl.rating.value),
        )
        dangerRatingContent.innerHTML += day
    })
    console.log("Danger Ratings Rendered")
}


function updateAvalancheData() {
    fetch('/avi_report').then(data => {
        return data.json()
    }).then(data => {
        document.getElementById('title').textContent = avalanche_data.report.title;
        document.getElementById('forecaster').textContent = avalanche_data.report.forecaster;
        document.getElementById('dateIssued').textContent = new Date(avalanche_data.report.dateIssued).toLocaleString();
        document.getElementById('validUntil').textContent = new Date(avalanche_data.report.validUntil).toLocaleString();
        document.getElementById('highlights').textContent = avalanche_data.report.highlights;
        renderDangerRatings(data)
    }).catch(err => {
        console.log(err)
    })
}


updateAvalancheData();